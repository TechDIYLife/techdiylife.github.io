<!DOCTYPE html><html><head>
      <title>AIå¼€å‘è€…é¢‘é“</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
      
      
      
      
      
      <style>
      code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    // your code here
  });
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      
<p>ã€æœ¬æ–‡é€šè¿‡ChatGPTç¿»è¯‘ï¼Œä»…ä¾›å‚è€ƒä½¿ç”¨ï¼Œå»ºè®®å¯¹ç…§è‹±æ–‡é˜…è¯»ã€‘<br>
åŸæ–‡åœ°å€ï¼š</p>
<p><strong>ç›®å½•ç´¢å¼•</strong></p>
<div class="code-chunk" data-id="code-chunk-id-0" data-cmd="toc"><div class="input-div"><div class="code-chunk-btn-group"><div class="run-btn btn btn-xs btn-primary"><span>â–¶ï¸</span></div><div class="run-all-btn btn btn-xs btn-primary">all</div></div><div class="status">running...</div></div><div class="output-div"></div></div><ul>
<li><a href="#%E6%95%B0%E6%8D%AE%E6%A3%80%E7%B4%A2%E7%BB%BC%E8%BF%B0--%EF%B8%8F-langchain">æ•°æ®æ£€ç´¢ï¼ˆç»¼è¿°ï¼‰ | ğŸ¦œï¸ğŸ”— LangChain</a>
<ul>
<li><a href="#%E6%96%87%E6%A1%A3%E5%8A%A0%E8%BD%BD%E5%99%A8httpspythonlangchaincomdocsmodulesdata_connectiondocument_loaders">æ–‡æ¡£åŠ è½½å™¨</a></li>
<li><a href="#%E6%96%87%E6%9C%AC%E5%88%86%E5%89%B2httpspythonlangchaincomdocsmodulesdata_connectiondocument_transformers">æ–‡æœ¬åˆ†å‰²</a></li>
<li><a href="#%E6%96%87%E6%9C%AC%E5%B5%8C%E5%85%A5%E6%A8%A1%E5%9E%8Bhttpspythonlangchaincomdocsmodulesdata_connectiontext_embedding">æ–‡æœ¬åµŒå…¥æ¨¡å‹</a></li>
<li><a href="#%E5%90%91%E9%87%8F%E5%AD%98%E5%82%A8httpspythonlangchaincomdocsmodulesdata_connectionvectorstores">å‘é‡å­˜å‚¨</a></li>
<li><a href="#%E6%A3%80%E7%B4%A2%E5%99%A8httpspythonlangchaincomdocsmodulesdata_connectionretrievers">æ£€ç´¢å™¨</a></li>
<li><a href="#%E7%B4%A2%E5%BC%95httpspythonlangchaincomdocsmodulesdata_connectionindexing">ç´¢å¼•</a></li>
</ul>
</li>
<li><a href="#%E6%96%87%E6%A1%A3%E5%8A%A0%E8%BD%BD%E5%99%A8--%EF%B8%8F-langchain">æ–‡æ¡£åŠ è½½å™¨ | ğŸ¦œï¸ğŸ”— LangChain</a>
<ul>
<li><a href="#%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E9%97%AE%E9%A2%98">å­¦ä¹ ç¬”è®°ï¼ˆé—®é¢˜ï¼‰ï¼š</a></li>
</ul>
</li>
<li><a href="#%E6%96%87%E6%9C%AC%E5%88%86%E5%89%B2%E5%99%A8--%EF%B8%8F-langchain">æ–‡æœ¬åˆ†å‰²å™¨ | ğŸ¦œï¸ğŸ”— LangChain</a>
<ul>
<li><a href="#%E6%96%87%E6%9C%AC%E5%88%86%E5%89%B2%E5%99%A8%E7%9A%84%E7%B1%BB%E5%9E%8B">æ–‡æœ¬åˆ†å‰²å™¨çš„ç±»å‹</a></li>
<li><a href="#%E5%A6%82%E4%BD%95%E8%AF%84%E4%BC%B0%E6%96%87%E6%9C%AC%E5%88%86%E5%89%B2%E5%99%A8">å¦‚ä½•è¯„ä¼°æ–‡æœ¬åˆ†å‰²å™¨</a></li>
<li><a href="#%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3%E8%BD%AC%E6%8D%A2">å…¶ä»–æ–‡æ¡£è½¬æ¢</a></li>
<li><a href="#%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E9%97%AE%E9%A2%98-1">å­¦ä¹ ç¬”è®°ï¼ˆé—®é¢˜ï¼‰</a></li>
</ul>
</li>
<li><a href="#%E6%96%87%E6%9C%AC%E5%B5%8C%E5%85%A5%E6%A8%A1%E5%9E%8B--%EF%B8%8F-langchain">æ–‡æœ¬åµŒå…¥æ¨¡å‹ | ğŸ¦œï¸ğŸ”— LangChain</a>
<ul>
<li><a href="#%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B">å¿«é€Ÿå¼€å§‹</a>
<ul>
<li><a href="#%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97openai">é…ç½®æŒ‡å—(OpenAI)</a></li>
<li><a href="#embed_documents-%E6%96%87%E6%A1%A3%E5%B5%8C%E5%85%A5">embed_documents æ–‡æ¡£åµŒå…¥</a></li>
<li><a href="#embed_query%E6%9F%A5%E8%AF%A2%E5%B5%8C%E5%85%A5">embed_queryæŸ¥è¯¢åµŒå…¥</a></li>
</ul>
</li>
<li><a href="#%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E9%97%AE%E9%A2%98-2">å­¦ä¹ ç¬”è®°ï¼ˆé—®é¢˜ï¼‰</a></li>
</ul>
</li>
<li><a href="#%E5%90%91%E9%87%8F%E5%AD%98%E5%82%A8--%EF%B8%8F-langchain">å‘é‡å­˜å‚¨ | ğŸ¦œï¸ğŸ”— LangChain</a>
<ul>
<li><a href="#%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97">å…¥é—¨æŒ‡å—</a>
<ul>
<li><a href="#%E7%9B%B8%E4%BC%BC%E5%BA%A6%E6%A3%80%E7%B4%A2">ç›¸ä¼¼åº¦æ£€ç´¢</a></li>
<li><a href="#%E5%9F%BA%E4%BA%8Evector%E7%9A%84%E7%9B%B8%E4%BC%BC%E5%BA%A6%E6%A3%80%E7%B4%A2">åŸºäºVectorçš„ç›¸ä¼¼åº¦æ£€ç´¢</a></li>
</ul>
</li>
<li><a href="#%E5%BC%82%E6%AD%A5%E6%93%8D%E4%BD%9C%E8%AF%B4%E6%98%8E">å¼‚æ­¥æ“ä½œè¯´æ˜</a></li>
<li><a href="#%E6%9C%80%E5%A4%A7%E8%BE%B9%E9%99%85%E7%9B%B8%E5%85%B3%E6%80%A7%E6%90%9C%E7%B4%A2-mmr">æœ€å¤§è¾¹é™…ç›¸å…³æ€§æœç´¢ (MMR)</a></li>
</ul>
</li>
<li><a href="#%E6%A3%80%E7%B4%A2%E5%99%A8--%EF%B8%8F-langchain">æ£€ç´¢å™¨ | ğŸ¦œï¸ğŸ”— LangChain</a>
<ul>
<li><a href="#%E9%AB%98%E7%BA%A7%E6%A3%80%E7%B4%A2%E7%B1%BB%E5%9E%8B">é«˜çº§æ£€ç´¢ç±»å‹</a></li>
<li><a href="#%E7%AC%AC%E4%B8%89%E6%96%B9%E9%9B%86%E6%88%90">ç¬¬ä¸‰æ–¹é›†æˆ</a></li>
<li><a href="#%E5%9C%A8-lcel-%E4%B8%AD%E4%BD%BF%E7%94%A8%E6%A3%80%E7%B4%A2%E5%99%A8">åœ¨ LCEL ä¸­ä½¿ç”¨æ£€ç´¢å™¨</a></li>
<li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A3%80%E7%B4%A2%E5%99%A8">è‡ªå®šä¹‰æ£€ç´¢å™¨</a></li>
<li><a href="#%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E9%97%AE%E9%A2%98-3">å­¦ä¹ ç¬”è®°ï¼ˆé—®é¢˜ï¼‰</a></li>
</ul>
</li>
<li><a href="#%E7%B4%A2%E5%BC%95--%EF%B8%8F-langchain">ç´¢å¼• | ğŸ¦œï¸ğŸ”— LangChain</a>
<ul>
<li><a href="#%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86">å·¥ä½œåŸç†</a></li>
<li><a href="#%E5%88%A0%E9%99%A4%E6%A8%A1%E5%BC%8F">åˆ é™¤æ¨¡å¼</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8%E8%A6%81%E6%B1%82">ä½¿ç”¨è¦æ±‚</a></li>
<li><a href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9">æ³¨æ„äº‹é¡¹</a></li>
<li><a href="#%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B-1">å¿«é€Ÿå¼€å§‹</a></li>
</ul>
</li>
</ul>
<h1 id="æ•°æ®æ£€ç´¢ç»¼è¿°--ï¸-langchain">æ•°æ®æ£€ç´¢ï¼ˆç»¼è¿°ï¼‰ | ğŸ¦œï¸ğŸ”— LangChain </h1>
<p>åŸæ–‡å…¨æ–‡ï¼š<a href="https://python.langchain.com/docs/modules/data_connection/">https://python.langchain.com/docs/modules/data_connection/</a></p>
<p>åœ¨è®¸å¤šå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„åº”ç”¨åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦å¤„ç†ç”¨æˆ·ç‰¹å®šçš„æ•°æ®ï¼Œè¿™äº›æ•°æ®å¹¶ä¸åŒ…å«åœ¨æ¨¡å‹çš„è®­ç»ƒé›†ä¸­ã€‚è¦å®ç°è¿™ä¸€ç‚¹ï¼Œé€šå¸¸é‡‡ç”¨çš„æ–¹æ³•æ˜¯æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRetrieval Augmented Generationï¼ŒRAGï¼‰ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯åœ¨ç”Ÿæˆå“åº”ä¹‹å‰ï¼Œå…ˆä»å¤–éƒ¨è·å–æ‰€éœ€çš„æ•°æ®ã€‚</p>
<p>LangChainä¸ºæ„å»ºRAGåº”ç”¨æä¾›äº†ä¸€æ•´å¥—è§£å†³æ–¹æ¡ˆï¼Œæ— è®ºæ˜¯ç®€å•è¿˜æ˜¯å¤æ‚çš„åº”ç”¨åœºæ™¯ã€‚æœ¬æ–‡æ¡£éƒ¨åˆ†è¯¦ç»†ä»‹ç»äº†æ•°æ®æ£€ç´¢è¿‡ç¨‹ï¼Œè¿™å¯èƒ½çœ‹èµ·æ¥å¾ˆç›´ç™½ï¼Œä½†å®é™…ä¸Šæ¶‰åŠä¸å°‘å¤æ‚çš„ç»†èŠ‚ï¼ŒåŒ…æ‹¬å¤šä¸ªå…³é”®æ¨¡å—ã€‚</p>
<p><img src="https://python.langchain.com/assets/images/data_connection-95ff2033a8faa5f3ba41376c0f6dd32a.jpg" alt="æœ¬å›¾å±•ç¤ºäº†æ•°æ®è¿æ¥çš„å„ä¸ªæ­¥éª¤ï¼ŒåŒ…æ‹¬æ•°æ®æ¥æºã€åŠ è½½ã€è½¬æ¢ã€åµŒå…¥ã€å­˜å‚¨å’Œæ£€ç´¢ã€‚" title="æ•°æ®è¿æ¥è¿‡ç¨‹å›¾è§£"></p>
<h2 id="æ–‡æ¡£åŠ è½½å™¨httpspythonlangchaincomdocsmodulesdata_connectiondocument_loaders"><a href="https://python.langchain.com/docs/modules/data_connection/document_loaders/">æ–‡æ¡£åŠ è½½å™¨</a> </h2>
<p>æ–‡æ¡£åŠ è½½å™¨çš„ä½œç”¨æ˜¯ä»å„ç§æ¥æºå¯¼å…¥æ–‡æ¡£ã€‚LangChainæ”¯æŒè¶…è¿‡100ç§ä¸åŒçš„æ–‡æ¡£åŠ è½½å™¨ï¼Œå¹¶ä¸å¸‚åœºä¸Šçš„ä¸»æµæœåŠ¡å¦‚AirByteå’ŒUnstructuredè¿›è¡Œäº†é›†æˆï¼Œèƒ½å¤Ÿå¤„ç†åŒ…æ‹¬HTMLã€PDFå’Œä»£ç åœ¨å†…çš„å„ç±»æ–‡æ¡£ï¼Œæ— è®ºæ˜¯æ¥è‡ªç§æœ‰S3 bucketsï¼ˆäºšé©¬é€ŠAWSçš„ä¸€é¡¹æœåŠ¡ï¼‰è¿˜æ˜¯å…¬å…±ç½‘ç«™ã€‚</p>
<h2 id="æ–‡æœ¬åˆ†å‰²httpspythonlangchaincomdocsmodulesdata_connectiondocument_transformers"><a href="https://python.langchain.com/docs/modules/data_connection/document_transformers/">æ–‡æœ¬åˆ†å‰²</a> </h2>
<p>åœ¨æ•°æ®æ£€ç´¢è¿‡ç¨‹ä¸­ï¼Œä»…æå–æ–‡æ¡£çš„ç›¸å…³éƒ¨åˆ†è‡³å…³é‡è¦ã€‚è¿™éœ€è¦å¯¹æ–‡æ¡£è¿›è¡Œå¤šä¸ªè½¬æ¢æ­¥éª¤çš„å¤„ç†ï¼Œå…¶ä¸­å…³é”®ä¸€æ­¥æ˜¯å°†å¤§å‹æ–‡æ¡£æ‹†åˆ†ä¸ºå°å—ã€‚LangChainæä¾›äº†å¤šç§æ–‡æ¡£è½¬æ¢ç®—æ³•ï¼Œè¿˜é’ˆå¯¹ç‰¹å®šç±»å‹çš„æ–‡æ¡£ï¼ˆå¦‚ä»£ç ã€Markdownç­‰ï¼‰ä¼˜åŒ–äº†å¤„ç†é€»è¾‘ã€‚</p>
<h2 id="æ–‡æœ¬åµŒå…¥æ¨¡å‹httpspythonlangchaincomdocsmodulesdata_connectiontext_embedding"><a href="https://python.langchain.com/docs/modules/data_connection/text_embedding/">æ–‡æœ¬åµŒå…¥æ¨¡å‹</a> </h2>
<p>åˆ›å»ºæ–‡æ¡£åµŒå…¥ä¹Ÿæ˜¯æ£€ç´¢è¿‡ç¨‹çš„å…³é”®ä¸€ç¯ã€‚åµŒå…¥é€šè¿‡æ•æ‰æ–‡æœ¬çš„è¯­ä¹‰æ„ä¹‰ï¼Œä½¿å¾—å¿«é€Ÿé«˜æ•ˆåœ°æŸ¥æ‰¾ç›¸ä¼¼æ–‡æœ¬æˆä¸ºå¯èƒ½ã€‚LangChainæ”¯æŒè¶…è¿‡25ç§ä¸åŒçš„åµŒå…¥æä¾›æ–¹å’Œæ–¹æ³•ï¼Œä»å¼€æºåˆ°å•†ä¸šAPIï¼Œè®©ç”¨æˆ·å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦é€‰æ‹©æœ€åˆé€‚çš„æœåŠ¡ã€‚æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæ ‡å‡†åŒ–æ¥å£ï¼Œæ–¹ä¾¿ç”¨æˆ·åœ¨ä¸åŒæ¨¡å‹é—´åˆ‡æ¢ã€‚</p>
<h2 id="å‘é‡å­˜å‚¨httpspythonlangchaincomdocsmodulesdata_connectionvectorstores"><a href="https://python.langchain.com/docs/modules/data_connection/vectorstores/">å‘é‡å­˜å‚¨</a> </h2>
<p>éšç€æ–‡æœ¬åµŒå…¥æŠ€æœ¯çš„å‘å±•ï¼Œå¯¹äºæ”¯æŒè¿™äº›åµŒå…¥é«˜æ•ˆå­˜å‚¨ä¸æœç´¢çš„æ•°æ®åº“éœ€æ±‚æ—¥ç›Šå¢åŠ ã€‚LangChainé›†æˆäº†50å¤šç§ä¸åŒçš„å‘é‡å­˜å‚¨æ–¹æ¡ˆï¼Œä»æœ¬åœ°å¼€æºåˆ°äº‘ç«¯ç§æœ‰ï¼Œæ»¡è¶³ä¸åŒç”¨æˆ·çš„éœ€æ±‚ã€‚æˆ‘ä»¬æä¾›çš„æ ‡å‡†æ¥å£ä½¿å¾—åœ¨ä¸åŒå‘é‡å­˜å‚¨æ–¹æ¡ˆé—´åˆ‡æ¢å˜å¾—ç®€å•ä¾¿æ·ã€‚</p>
<h2 id="æ£€ç´¢å™¨httpspythonlangchaincomdocsmodulesdata_connectionretrievers"><a href="https://python.langchain.com/docs/modules/data_connection/retrievers/">æ£€ç´¢å™¨</a> </h2>
<p>å°†æ•°æ®å­˜å…¥æ•°æ®åº“åï¼Œæ¥ä¸‹æ¥çš„ä»»åŠ¡æ˜¯å¦‚ä½•æ£€ç´¢è¿™äº›æ•°æ®ã€‚LangChainæ”¯æŒå¤šç§æ£€ç´¢ç®—æ³•ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬æä¾›æœ€å¤§ä»·å€¼çš„æ–¹é¢ä¹‹ä¸€ã€‚æˆ‘ä»¬ä¸ä»…æ”¯æŒç®€å•çš„è¯­ä¹‰æœç´¢ï¼Œè¿™å¯¹åˆå­¦è€…å‹å¥½ï¼Œè€Œä¸”è¿˜å¼€å‘äº†ä¸€ç³»åˆ—é«˜æ€§èƒ½çš„ç®—æ³•ã€‚è¿™äº›ç®—æ³•åŒ…æ‹¬ï¼š</p>
<ul>
<li><a href="https://python.langchain.com/docs/modules/data_connection/retrievers/parent_document_retriever/">çˆ¶æ–‡æ¡£æ£€ç´¢å™¨</a>ï¼šä¸ºæ¯ä¸ªçˆ¶æ–‡æ¡£åˆ›å»ºå¤šä¸ªåµŒå…¥ï¼Œä½¿æŸ¥æ‰¾å°å—ä¿¡æ¯æ—¶èƒ½å¤Ÿè¿”å›æ›´å…¨é¢çš„ä¸Šä¸‹æ–‡ã€‚</li>
<li><a href="https://python.langchain.com/docs/modules/data_connection/retrievers/self_query/">è‡ªæˆ‘æŸ¥è¯¢æ£€ç´¢å™¨</a>ï¼šç”¨æˆ·çš„æŸ¥è¯¢å¾€å¾€åŒ…å«äº†ä¸€äº›é€»è¾‘è¡¨è¾¾ï¼Œä¸ä»…ä»…æ˜¯åŸºäºè¯­ä¹‰çš„ã€‚è‡ªæˆ‘æŸ¥è¯¢åŠŸèƒ½èƒ½å¤Ÿå°†æŸ¥è¯¢ä¸­çš„è¯­ä¹‰éƒ¨åˆ†ä¸å…¶ä»–å…ƒæ•°æ®è¿‡æ»¤æ¡ä»¶åŒºåˆ†å¼€æ¥ã€‚</li>
<li><a href="https://python.langchain.com/docs/modules/data_connection/retrievers/ensemble/">é›†æˆæ£€ç´¢å™¨</a>ï¼šæœ‰æ—¶å€™ï¼Œä½ å¯èƒ½éœ€è¦ä»å¤šä¸ªä¸åŒçš„æ•°æ®æºï¼Œæˆ–ä½¿ç”¨ä¸åŒçš„ç®—æ³•æ¥æ£€ç´¢æ–‡æ¡£ã€‚é›†æˆæ£€ç´¢åŠŸèƒ½ä½¿å¾—è¿™ä¸€åˆ‡å˜å¾—ç®€å•ã€‚</li>
<li>æ›´å¤šåŠŸèƒ½ç­‰ä½ æ¢ç´¢ï¼</li>
</ul>
<h2 id="ç´¢å¼•httpspythonlangchaincomdocsmodulesdata_connectionindexing"><a href="https://python.langchain.com/docs/modules/data_connection/indexing/">ç´¢å¼•</a> </h2>
<p>LangChainçš„ç´¢å¼•APIèƒ½å¤Ÿå¸®åŠ©ä½ å°†æ•°æ®ä»ä»»ä½•æ¥æºåŒæ­¥åˆ°å‘é‡å­˜å‚¨ï¼Œå®ç°ä»¥ä¸‹ç›®çš„ï¼š</p>
<ul>
<li>é¿å…å‘é‡å­˜å‚¨ä¸­çš„å†…å®¹é‡å¤</li>
<li>é¿å…é‡å¤å†™å…¥æœªæ›´æ”¹çš„å†…å®¹</li>
<li>å‡å°‘å¯¹æœªå˜æ›´å†…å®¹çš„åµŒå…¥é‡æ–°è®¡ç®—</li>
</ul>
<p>è¿™ä¸ä»…å¯ä»¥èŠ‚çœä½ çš„æ—¶é—´å’Œèµ„é‡‘ï¼Œè¿˜èƒ½æå‡å‘é‡æœç´¢çš„æ•ˆæœã€‚</p>
<h1 id="æ–‡æ¡£åŠ è½½å™¨--ï¸-langchain">æ–‡æ¡£åŠ è½½å™¨ | ğŸ¦œï¸ğŸ”— LangChain </h1>
<p>åŸæ–‡å…¨æ–‡ï¼š<a href="https://python.langchain.com/docs/modules/data_connection/document_loaders/">https://python.langchain.com/docs/modules/data_connection/document_loaders/</a></p>
<p>æ–‡æ¡£åŠ è½½å™¨ç”¨äºå°†æ•°æ®ä»æºå¤´ä»¥<code>Document</code>çš„å½¢å¼åŠ è½½è¿›æ¥ã€‚<code>Document</code>æŒ‡çš„æ˜¯åŒ…å«æ–‡æœ¬å’Œç›¸å…³å…ƒæ•°æ®çš„æ•°æ®å•å…ƒã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå­˜åœ¨ä¸“é—¨åŠ è½½ç®€å•<code>.txt</code>æ–‡ä»¶çš„æ–‡æ¡£åŠ è½½å™¨ï¼Œèƒ½å¤ŸåŠ è½½ä»»ä½•ç½‘é¡µçš„æ–‡æœ¬å†…å®¹ï¼Œä¹ƒè‡³äºåŠ è½½YouTubeè§†é¢‘çš„å­—å¹•æ–‡æœ¬ã€‚</p>
<p>æ–‡æ¡£åŠ è½½å™¨æä¾›äº†ä¸€ä¸ªç”¨äºä»é…ç½®æºä¸­ä»¥æ–‡æ¡£å½¢å¼åŠ è½½æ•°æ®çš„â€œåŠ è½½ï¼ˆloadï¼‰â€æ–¹æ³•ã€‚æ­¤å¤–ï¼Œæ–‡æ¡£åŠ è½½å™¨è¿˜æ”¯æŒâ€œæ‡’åŠ è½½â€ï¼Œå¯ä»¥æŒ‰éœ€å°†æ•°æ®åŠ è½½åˆ°å†…å­˜ä¸­ã€‚</p>
<p><strong>å¿«é€Ÿå¼€å§‹</strong><br>
æœ€åŸºç¡€çš„åŠ è½½å™¨åŠŸèƒ½æ˜¯è¯»å–ä¸€ä¸ªæ–‡ä»¶çš„æ–‡æœ¬å†…å®¹ï¼Œå¹¶æŠŠæ‰€æœ‰å†…å®¹æ•´åˆåˆ°ä¸€ä¸ªæ–‡æ¡£é‡Œã€‚</p>
<pre data-role="codeBlock" data-info="" class="language-text"><code>from langchain_community.document_loaders import TextLoader

loader = TextLoader("./index.md")
loader.load()
</code></pre><p>è¾“å‡ºç»“æœï¼š</p>
<pre data-role="codeBlock" data-info="" class="language-text"><code>[    Document(page_content='---\\nsidebar_position: 0\\n---\\n# æ–‡æ¡£åŠ è½½å™¨\\n\\næ–‡æ¡£åŠ è½½å™¨ç”¨äºå°†æ•°æ®ä»æºå¤´ä»¥`Document`çš„å½¢å¼åŠ è½½è¿›æ¥ã€‚`Document`æŒ‡çš„æ˜¯åŒ…å«æ–‡æœ¬å’Œç›¸å…³å…ƒæ•°æ®çš„æ•°æ®å•å…ƒã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå­˜åœ¨ä¸“é—¨åŠ è½½ç®€å•`.txt`æ–‡ä»¶çš„æ–‡æ¡£åŠ è½½å™¨ï¼Œèƒ½å¤ŸåŠ è½½ä»»ä½•ç½‘é¡µçš„æ–‡æœ¬å†…å®¹ï¼Œä¹ƒè‡³äºåŠ è½½YouTubeè§†é¢‘çš„å­—å¹•æ–‡æœ¬ã€‚\\n\\næ¯ä¸ªæ–‡æ¡£åŠ è½½å™¨æä¾›ä¸¤ç§æ“ä½œæ–¹å¼ï¼š\\n1. \"åŠ è½½ï¼ˆLoadï¼‰\": ä»é…ç½®æºä¸­åŠ è½½æ–‡æ¡£\\n2. \"åŠ è½½å¹¶åˆ†å‰²ï¼ˆLoad and splitï¼‰\": ä»é…ç½®æºä¸­åŠ è½½æ–‡æ¡£ï¼Œå¹¶æ ¹æ®æä¾›çš„æ–‡æœ¬åˆ†å‰²å™¨è¿›è¡Œåˆ†å‰²\\n\\næ­¤å¤–ï¼Œæ–‡æ¡£åŠ è½½å™¨è¿˜æ”¯æŒï¼š\\n\\n3. \"æ‡’åŠ è½½ï¼ˆLazy loadï¼‰\": æŒ‰éœ€å°†æ–‡æ¡£åŠ è½½åˆ°å†…å­˜ä¸­\\n', metadata={'source': '../docs/docs/modules/data_connection/document_loaders/index.md'})]
</code></pre><h2 id="å­¦ä¹ ç¬”è®°é—®é¢˜">å­¦ä¹ ç¬”è®°ï¼ˆé—®é¢˜ï¼‰ï¼š </h2>
<ul>
<li>Q1ï¼šå¦‚ä½•å¤„ç†å¤æ‚æ–‡æ¡£ï¼Œæ¯”å¦‚csvï¼ŒPDFï¼Œofficeæ–‡æ¡£ç­‰ï¼Ÿ<br>
LangChainæä¾›çš„æœ‰å¸¸è§æ–‡æ¡£çš„å¯¼å…¥æ–¹æ³•ã€‚<br>
<a href="https://python.langchain.com/docs/modules/data_connection/document_loaders/">https://python.langchain.com/docs/modules/data_connection/document_loaders/</a></li>
</ul>
<h1 id="æ–‡æœ¬åˆ†å‰²å™¨--ï¸-langchain">æ–‡æœ¬åˆ†å‰²å™¨ | ğŸ¦œï¸ğŸ”— LangChain </h1>
<p>åŸæ–‡å…¨æ–‡ï¼š<a href="https://python.langchain.com/docs/modules/data_connection/document_transformers/">https://python.langchain.com/docs/modules/data_connection/document_transformers/</a></p>
<p>å½“ä½ åŠ è½½äº†æ–‡æ¡£åï¼Œå¾€å¾€éœ€è¦å¯¹å…¶è¿›è¡Œè½¬æ¢ï¼Œä»¥ä¾¿æ›´å¥½åœ°é€‚é…ä½ çš„åº”ç”¨åœºæ™¯ã€‚ä¸€ä¸ªå…¸å‹ä¾‹å­æ˜¯ï¼Œä½ å¯èƒ½éœ€è¦å°†ä¸€ç¯‡é•¿æ–‡æ¡£åˆ†å‰²æˆè‹¥å¹²å°ç‰‡æ®µï¼Œä½¿ä¹‹èƒ½å¤Ÿé€‚åº”ä½ çš„æ¨¡å‹çš„ä¸Šä¸‹æ–‡çª—å£å¤§å°ã€‚LangChainå†…ç½®äº†è®¸å¤šæ–‡æ¡£è½¬æ¢å·¥å…·ï¼Œç®€åŒ–äº†æ–‡æ¡£çš„åˆ†å‰²ã€åˆå¹¶ã€è¿‡æ»¤ç­‰æ“ä½œã€‚</p>
<p>å¤„ç†é•¿æ–‡æœ¬æ—¶ï¼Œå°†å…¶åˆ†å‰²æˆå°å—æ˜¯å¿…é¡»çš„ã€‚è™½ç„¶å¬èµ·æ¥ç®€å•ï¼Œä½†å®é™…ä¸ŠåŒ…å«äº†ä¸å°‘å¤æ‚æ€§ã€‚ç†æƒ³çŠ¶æ€ä¸‹ï¼Œä½ ä¼šå¸Œæœ›å°†è¯­ä¹‰ä¸Šç›¸å…³çš„æ–‡æœ¬ä¿æŒåœ¨ä¸€èµ·ã€‚æ‰€è°“â€œè¯­ä¹‰ç›¸å…³â€ï¼Œå…¶å…·ä½“å«ä¹‰å–å†³äºæ–‡æœ¬çš„ç±»å‹ã€‚æœ¬æ–‡æ¡£ä»‹ç»äº†å®ç°è¿™ä¸€ç›®æ ‡çš„å‡ ç§æ–¹æ³•ã€‚</p>
<p>ä»å®è§‚è§’åº¦çœ‹ï¼Œæ–‡æœ¬åˆ†å‰²å™¨éµå¾ªä»¥ä¸‹å·¥ä½œæµç¨‹ï¼š</p>
<ol>
<li>å°†æ–‡æœ¬åˆ†å‰²æˆå°çš„ã€å…·æœ‰è¯­ä¹‰æ„ä¹‰çš„å—ï¼ˆé€šå¸¸æ˜¯å¥å­ï¼‰ã€‚</li>
<li>ç„¶åå¼€å§‹å°†è¿™äº›å°å—åˆå¹¶æˆæ›´å¤§çš„å—ï¼Œç›´è‡³è¾¾åˆ°æŸä¸ªé¢„è®¾å¤§å°ï¼ˆé€šè¿‡æŸç§æ–¹å¼è¿›è¡Œæµ‹é‡ï¼‰ã€‚</li>
<li>è¾¾åˆ°è¯¥å¤§å°åï¼Œå°†è¿™ä¸€å¤§å—è§†ä¸ºä¸€ä¸ªç‹¬ç«‹çš„æ–‡æœ¬ç‰‡æ®µï¼Œå¹¶å¼€å§‹åˆ›å»ºæ–°çš„æ–‡æœ¬å—ï¼ŒåŒæ—¶ä¿ç•™ä¸€äº›é‡å éƒ¨åˆ†ï¼Œä»¥ç»´æŒå—ä¸å—ä¹‹é—´çš„ä¸Šä¸‹æ–‡è”ç³»ã€‚</li>
</ol>
<p>è¿™æ„å‘³ç€ï¼Œä½ å¯ä»¥ä»ä¸¤ä¸ªä¸åŒçš„è§’åº¦æ¥è‡ªå®šä¹‰ä½ çš„æ–‡æœ¬åˆ†å‰²å™¨ï¼š</p>
<ol>
<li>æ–‡æœ¬çš„åˆ†å‰²æ–¹å¼</li>
<li>å—å¤§å°çš„æµ‹é‡æ–¹æ³•</li>
</ol>
<h2 id="æ–‡æœ¬åˆ†å‰²å™¨çš„ç±»å‹">æ–‡æœ¬åˆ†å‰²å™¨çš„ç±»å‹ </h2>
<p>LangChainæä¾›å¤šç§æ–‡æœ¬åˆ†å‰²å™¨ï¼Œæ‰€æœ‰è¿™äº›éƒ½åŒ…å«åœ¨<code>langchain-text-splitters</code>åŒ…ä¸­ã€‚ä¸‹è¡¨åˆ—å‡ºäº†å„ç§åˆ†å‰²å™¨åŠå…¶ç‰¹ç‚¹ï¼š</p>
<p><strong>åç§°</strong>ï¼šåˆ†å‰²å™¨çš„åç§°</p>
<p><strong>åˆ†å‰²ä¾æ®</strong>ï¼šè¯¥åˆ†å‰²å™¨åŸºäºä½•ç§é€»è¾‘è¿›è¡Œæ–‡æœ¬åˆ†å‰²</p>
<p><strong>æ·»åŠ å…ƒæ•°æ®</strong>ï¼šè¯¥åˆ†å‰²å™¨æ˜¯å¦ä¼šæ·»åŠ å…³äºæ–‡æœ¬å—æ¥æºçš„å…ƒæ•°æ®</p>
<p><strong>æè¿°</strong>ï¼šåˆ†å‰²å™¨çš„å…·ä½“æè¿°åŠå…¶ä½¿ç”¨æ¨è</p>
<table>
<thead>
<tr>
<th>åç§°</th>
<th>åˆ†å‰²ä¾æ®</th>
<th>æ·»åŠ å…ƒæ•°æ®</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>é€’å½’</td>
<td>ç”¨æˆ·å®šä¹‰å­—ç¬¦</td>
<td></td>
<td>é€šè¿‡é€’å½’åˆ†å‰²æ–‡æœ¬ï¼Œä»¥å°½é‡ä¿æŒç›¸å…³æ–‡æœ¬ç‰‡æ®µçš„ç›¸é‚»æ€§ã€‚æ¨èé¦–é€‰çš„æ–‡æœ¬åˆ†å‰²æ–¹å¼ã€‚</td>
</tr>
<tr>
<td>HTML</td>
<td>ç‰¹å®šäºHTMLçš„å­—ç¬¦</td>
<td>âœ…</td>
<td>æ ¹æ®HTMLç‰¹æœ‰å­—ç¬¦åˆ†å‰²æ–‡æœ¬ï¼Œå¹¶æä¾›äº†å—æ¥æºçš„è¯¦ç»†ä¿¡æ¯ã€‚</td>
</tr>
<tr>
<td>Markdown</td>
<td>ç‰¹å®šäºMarkdownçš„å­—ç¬¦</td>
<td>âœ…</td>
<td>æ ¹æ®Markdownç‰¹æœ‰å­—ç¬¦åˆ†å‰²æ–‡æœ¬ï¼Œå¹¶æä¾›äº†å—æ¥æºçš„è¯¦ç»†ä¿¡æ¯ã€‚</td>
</tr>
<tr>
<td>ä»£ç </td>
<td>ç¼–ç¨‹è¯­è¨€ç‰¹å®šå­—ç¬¦ (Python, JS)</td>
<td></td>
<td>æ ¹æ®ä¸åŒç¼–ç¨‹è¯­è¨€çš„ç‰¹å®šå­—ç¬¦æ¥åˆ†å‰²æ–‡æœ¬ï¼Œæ”¯æŒ15ç§ç¼–ç¨‹è¯­è¨€ã€‚</td>
</tr>
<tr>
<td>Token</td>
<td>Tokens</td>
<td></td>
<td>ä¾æ®tokensæ¥åˆ†å‰²æ–‡æœ¬ï¼Œå­˜åœ¨å¤šç§è®¡ç®—tokençš„æ–¹æ³•ã€‚</td>
</tr>
<tr>
<td>å­—ç¬¦</td>
<td>ç”¨æˆ·å®šä¹‰å­—ç¬¦</td>
<td></td>
<td>é€šè¿‡ç”¨æˆ·æŒ‡å®šçš„å­—ç¬¦æ¥åˆ†å‰²æ–‡æœ¬ï¼Œæ˜¯æœ€ç®€å•ç›´æ¥çš„åˆ†å‰²æ–¹æ³•ä¹‹ä¸€ã€‚</td>
</tr>
<tr>
<td>[å®éªŒæ€§] è¯­ä¹‰å—</td>
<td>å¥å­</td>
<td></td>
<td>é¦–å…ˆæŒ‰å¥å­åˆ†å‰²ï¼Œå†æ ¹æ®è¯­ä¹‰ç›¸ä¼¼åº¦å°†ç›¸é‚»å¥å­ç»„åˆèµ·æ¥ã€‚æ¥è‡ª <a href="https://github.com/FullStackRetrieval-com/RetrievalTutorials/blob/main/tutorials/LevelsOfTextSplitting/5_Levels_Of_Text_Splitting.ipynb">Greg Kamradt</a> çš„æ–¹æ³•</td>
</tr>
<tr>
<td><a href="https://python.langchain.com/docs/integrations/document_transformers/ai21_semantic_text_splitter/">AI21 è¯­ä¹‰æ–‡æœ¬åˆ†å‰²å™¨</a></td>
<td>è¯­ä¹‰</td>
<td>âœ…</td>
<td>æ ¹æ®ä¸åŒçš„ä¸»é¢˜å°†æ–‡æœ¬åˆ’åˆ†ä¸ºè¿è´¯çš„ç‰‡æ®µã€‚</td>
</tr>
</tbody>
</table>
<h2 id="å¦‚ä½•è¯„ä¼°æ–‡æœ¬åˆ†å‰²å™¨">å¦‚ä½•è¯„ä¼°æ–‡æœ¬åˆ†å‰²å™¨ </h2>
<p>ä½ å¯ä»¥åˆ©ç”¨<code>Greg Kamradt</code>å¼€å‘çš„<a href="https://www.chunkviz.com/">Chunkvizå·¥å…·</a>æ¥è¯„ä¼°æ–‡æœ¬åˆ†å‰²å™¨çš„æ•ˆæœã€‚<code>Chunkviz</code>æ˜¯ä¸€ä¸ªæä½³çš„å·¥å…·ï¼Œèƒ½å¤Ÿç›´è§‚åœ°æ˜¾ç¤ºä½ çš„æ–‡æœ¬å¦‚ä½•è¢«åˆ†å‰²ï¼Œå¹¶ååŠ©è°ƒæ•´åˆ†å‰²å‚æ•°ã€‚</p>
<h2 id="å…¶ä»–æ–‡æ¡£è½¬æ¢">å…¶ä»–æ–‡æ¡£è½¬æ¢ </h2>
<p>æ–‡æœ¬åˆ†å‰²åªæ˜¯ä½ å¯èƒ½æƒ³åœ¨æäº¤ç»™å¤§è¯­è¨€æ¨¡å‹(LLM)ä¹‹å‰å¯¹æ–‡æ¡£è¿›è¡Œçš„ä¼—å¤šè½¬æ¢ä¹‹ä¸€ã€‚è¯·è®¿é—®<a href="https://python.langchain.com/docs/integrations/document_transformers/">Integrations</a>äº†è§£æ›´å¤šæœ‰å…³ä¸ç¬¬ä¸‰æ–¹å·¥å…·é›†æˆçš„å†…ç½®æ–‡æ¡£è½¬æ¢å™¨çš„ä¿¡æ¯ã€‚</p>
<h2 id="å­¦ä¹ ç¬”è®°é—®é¢˜-1">å­¦ä¹ ç¬”è®°ï¼ˆé—®é¢˜ï¼‰ </h2>
<ul>
<li>Q1ï¼šChunkvizå·¥å…·æ˜¯ä»€ä¹ˆï¼Ÿ<br>
æ­¤å·¥å…·å¯¹æ–‡æœ¬åˆ†å‰²å±•ç¤ºçš„å¾ˆå½¢è±¡ï¼Œå¯ä»¥å¸®åŠ©ç†è§£æ–‡æœ¬åˆ†å‰²ï¼Œå°¤å…¶æ˜¯chunk-sizeï¼Œ overlapã€‚</li>
</ul>
<h1 id="æ–‡æœ¬åµŒå…¥æ¨¡å‹--ï¸-langchain">æ–‡æœ¬åµŒå…¥æ¨¡å‹ | ğŸ¦œï¸ğŸ”— LangChain </h1>
<p>åŸæ–‡å…¨æ–‡ï¼š<a href="https://python.langchain.com/docs/modules/data_connection/text_embedding/">https://python.langchain.com/docs/modules/data_connection/text_embedding/</a></p>
<p>è®¿é—®<a href="https://python.langchain.com/docs/integrations/text_embedding/">Integrations</a>æŸ¥çœ‹å…³äºæ–‡æœ¬åµŒå…¥æ¨¡å‹æä¾›å•†çš„é›†æˆæ–‡æ¡£ã€‚</p>
<p>Embeddingsç±»ä¸“ä¸ºä¸æ–‡æœ¬åµŒå…¥æ¨¡å‹äº¤äº’è€Œè®¾è®¡ã€‚ä¼—å¤šçš„æ¨¡å‹æä¾›å•†å¦‚OpenAIã€Cohereã€Hugging Faceç­‰ï¼Œæ­¤ç±»æä¾›ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ï¼Œä»¥ä¾¿äºä½¿ç”¨å®ƒä»¬ã€‚</p>
<p>Embeddingsçš„æ ¸å¿ƒåŠŸèƒ½æ˜¯å°†æ–‡æœ¬è½¬æ¢æˆå‘é‡è¡¨ç¤ºå½¢å¼ã€‚è¿™ç§æ–¹å¼æä¸ºæœ‰ç”¨ï¼Œå› ä¸ºå®ƒå…è®¸æˆ‘ä»¬åœ¨å‘é‡ç©ºé—´å†…å¯¹æ–‡æœ¬è¿›è¡Œåˆ†æå’Œæ“ä½œï¼Œä¾‹å¦‚è¿›è¡Œè¯­ä¹‰æœç´¢ï¼Œå³å¯»æ‰¾åœ¨å‘é‡ç©ºé—´ä¸­æœ€ä¸ºç›¸ä¼¼çš„æ–‡æœ¬ç‰‡æ®µã€‚</p>
<p>LangChainä¸­åŸºç¡€çš„Embeddingsç±»æä¾›äº†ä¸¤ä¸ªä¸»è¦æ–¹æ³•ï¼šåµŒå…¥æ–‡æ¡£å’ŒåµŒå…¥æŸ¥è¯¢ã€‚åµŒå…¥æ–‡æ¡£æ¥æ”¶å¤šä¸ªæ–‡æœ¬ä½œä¸ºè¾“å…¥ï¼Œè€ŒåµŒå…¥æŸ¥è¯¢åˆ™æ˜¯åŸºäºå•ä¸ªæ–‡æœ¬ã€‚è¿™æ ·è®¾è®¡æ˜¯å› ä¸ºä¸åŒçš„åµŒå…¥æ¨¡å‹æä¾›å•†å¯¹æ–‡æ¡£ï¼ˆæœç´¢å¯¹è±¡ï¼‰å’ŒæŸ¥è¯¢ï¼ˆæœç´¢è¯ï¼‰çš„å¤„ç†æ–¹å¼å¯èƒ½ä¸åŒã€‚</p>
<h2 id="å¿«é€Ÿå¼€å§‹">å¿«é€Ÿå¼€å§‹ </h2>
<h3 id="é…ç½®æŒ‡å—openai">é…ç½®æŒ‡å—(OpenAI) </h3>
<p>å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå®‰è£…OpenAIçš„å·¥å…·å¼€å‘åº“ï¼š</p>
<pre data-role="codeBlock" data-info="" class="language-text"><code>pip install langchain-openai
</code></pre><p>ä½¿ç”¨APIä¹‹å‰ï¼Œéœ€è¦ä¸€ä¸ªAPIå¯†é’¥ï¼Œæ‚¨å¯ä»¥é€šè¿‡åˆ›å»ºè´¦æˆ·åè®¿é—®<a href="https://platform.openai.com/account/api-keys">è¿™é‡Œ</a>è·å–ã€‚è·å–å¯†é’¥åï¼Œå»ºè®®é€šè¿‡å¦‚ä¸‹å‘½ä»¤è®¾ç½®ç¯å¢ƒå˜é‡ï¼š</p>
<pre data-role="codeBlock" data-info="" class="language-text"><code>export OPENAI_API_KEY="..."
</code></pre><p>å¦‚æœæ‚¨ä¸æƒ³ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Œä¹Ÿå¯ä»¥åœ¨åˆå§‹åŒ–OpenAIçš„LLMç±»æ—¶ï¼Œ</p>
<p>é€šè¿‡<code>openai_api_key</code>å‚æ•°ç›´æ¥æä¾›å¯†é’¥ï¼š</p>
<pre data-role="codeBlock" data-info="" class="language-text"><code>from langchain_openai import OpenAIEmbeddings
embeddings_model = OpenAIEmbeddings(openai_api_key="...")
</code></pre><p>æˆ–è€…ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä¸æä¾›ä»»ä½•å‚æ•°ç›´æ¥åˆå§‹åŒ–ï¼š</p>
<pre data-role="codeBlock" data-info="" class="language-text"><code>from langchain_openai import OpenAIEmbeddings
embeddings_model = OpenAIEmbeddings()
</code></pre><h3 id="embed_documents-æ–‡æ¡£åµŒå…¥">embed_documents æ–‡æ¡£åµŒå…¥ </h3>
<p><strong>åµŒå…¥ä¸€ç³»åˆ—æ–‡æœ¬</strong></p>
<p>é€šè¿‡ä¸‹é¢çš„ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸€ç³»åˆ—æ–‡æœ¬è½¬æ¢ä¸ºå‘é‡è¡¨ç¤ºï¼š</p>
<pre data-role="codeBlock" data-info="" class="language-text"><code>embeddings = embeddings_model.embed_documents([
    "Hi there!",
    "Oh, hello!",
    "What's your name?",
    "My friends call me World",
    "Hello World!"
])
len(embeddings), len(embeddings[0])
</code></pre><h3 id="embed_queryæŸ¥è¯¢åµŒå…¥">embed_queryæŸ¥è¯¢åµŒå…¥ </h3>
<p><strong>åµŒå…¥ä¸€ä¸ªæŸ¥è¯¢</strong></p>
<p>ä¸ºäº†æ¯”è¾ƒä¸åŒæ–‡æœ¬ç‰‡æ®µï¼Œæˆ‘ä»¬å¯ä»¥åµŒå…¥ä¸€ä¸ªå•ç‹¬çš„æŸ¥è¯¢æ–‡æœ¬ï¼š</p>
<pre data-role="codeBlock" data-info="" class="language-text"><code>embedded_query = embeddings_model.embed_query("What was the name mentioned in the conversation?")
embedded_query[:5]
</code></pre><p>å±•ç¤ºçš„å‘é‡æ˜¯è¿™æ ·çš„ï¼š</p>
<pre data-role="codeBlock" data-info="" class="language-text"><code>[0.0053587136790156364, -0.0004999046213924885, 0.038883671164512634, -0.003001077566295862, -0.00900818221271038]
</code></pre><h2 id="å­¦ä¹ ç¬”è®°é—®é¢˜-2">å­¦ä¹ ç¬”è®°ï¼ˆé—®é¢˜ï¼‰ </h2>
<ul>
<li>
<p>Q1ï¼šå‡ ä¸ªå¸¸è§é—®é¢˜<br>
Embeddingæ¨¡å‹æ˜¯å¦‚ä½•å¤„ç†çš„ï¼Ÿ<br>
è¿”å›çš„vectorç»´åº¦æ˜¯ç”±ä»€ä¹ˆå†³å®šçš„ï¼Ÿ<br>
ä¸åŒçš„æ¨¡å‹vectorç»´åº¦æœ‰å·®å¼‚å—ï¼Ÿ<br>
å¯ä»¥æ··åˆä½¿ç”¨æ¨¡å‹åˆ›å»ºvectorå—ï¼Ÿæ¯”å¦‚embed_documentsä¸embed_queryä½¿ç”¨ä¸åŒçš„æ¨¡å‹</p>
</li>
<li>
<p>Q2ï¼šembed_documents ä¸ embed_query æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<br>
embed_documentsæ˜¯è®¡ç®—æ–‡æ¡£çš„embddingï¼Œå¯ä»¥å¤„ç†å¤šä¸ªæ–‡æœ¬ã€‚<br>
embed_queryåªå¤„ç†å•ä¸ªæ–‡æœ¬ã€‚åœ¨ä½¿ç”¨ç›¸åŒæ¨¡å‹çš„æƒ…å†µä¸‹ï¼Œä¸¤è€…è¿”å›çš„embeddingçš„å€¼æ˜¯ç›¸åŒçš„ã€‚</p>
</li>
</ul>
<h1 id="å‘é‡å­˜å‚¨--ï¸-langchain">å‘é‡å­˜å‚¨ | ğŸ¦œï¸ğŸ”— LangChain </h1>
<p>åŸæ–‡å…¨æ–‡ï¼š<a href="https://python.langchain.com/docs/modules/data_connection/vectorstores/">https://python.langchain.com/docs/modules/data_connection/vectorstores/</a></p>
<p>æœ‰å…³ä¸ç¬¬ä¸‰æ–¹å‘é‡å­˜å‚¨é›†æˆçš„æ›´å¤šä¿¡æ¯ï¼Œè¯·è®¿é—® <a href="https://python.langchain.com/docs/integrations/vectorstores/">é›†æˆé¡µé¢</a>ã€‚</p>
<p>å‘é‡å­˜å‚¨æ˜¯ä¸€ç§å¸¸ç”¨çš„éç»“æ„åŒ–æ•°æ®å­˜å‚¨å’Œæœç´¢æ–¹æ³•ã€‚å…¶åŸºæœ¬è¿‡ç¨‹æ˜¯å°†æ•°æ®åµŒå…¥ç”Ÿæˆå‘é‡ï¼Œå¹¶å°†è¿™äº›å‘é‡å­˜å‚¨èµ·æ¥ï¼›åœ¨æŸ¥è¯¢æ—¶ï¼ŒåŒæ ·å°†æŸ¥è¯¢å†…å®¹åµŒå…¥å¹¶å¯»æ‰¾æœ€åŒ¹é…çš„å‘é‡ã€‚å‘é‡å­˜å‚¨çš„ä¸»è¦åŠŸèƒ½å°±æ˜¯è‡ªåŠ¨å®Œæˆæ•°æ®åµŒå…¥å’Œå‘é‡æœç´¢ã€‚</p>
<p><img src="https://python.langchain.com/assets/images/vector_stores-125d1675d58cfb46ce9054c9019fea72.jpg" alt="å‘é‡å­˜å‚¨è¿‡ç¨‹çš„ç¤ºæ„å›¾ï¼š1. åŠ è½½æºæ•°æ®ï¼Œ2. æŸ¥è¯¢å‘é‡å­˜å‚¨ï¼Œ3. æ£€ç´¢â€˜æœ€ç›¸ä¼¼â€™çš„ç»“æœã€‚" title="å‘é‡å­˜å‚¨è¿‡ç¨‹å›¾"></p>
<h2 id="å…¥é—¨æŒ‡å—">å…¥é—¨æŒ‡å— </h2>
<p>è¿™ä¸ªå…¥é—¨æŒ‡å—ä»‹ç»äº†å‘é‡å­˜å‚¨çš„åŸºç¡€åŠŸèƒ½ã€‚åˆ›å»ºå¹¶å­˜å…¥å‘é‡å­˜å‚¨çš„å‘é‡é€šå¸¸é€šè¿‡æ•°æ®åµŒå…¥å®Œæˆï¼Œå› æ­¤å»ºè®®æ‚¨åœ¨å¼€å§‹å‰å…ˆç†Ÿæ‚‰ <a href="https://python.langchain.com/docs/modules/data_connection/text_embedding/">æ–‡æœ¬åµŒå…¥æ¨¡å‹</a> çš„æ¥å£ã€‚</p>
<p>ä»¥ä¸‹æ˜¯å‡ ç§ä¼˜ç§€çš„å‘é‡å­˜å‚¨æ–¹æ¡ˆï¼Œå®ƒä»¬éƒ½æ˜¯å…è´¹å’Œå¼€æºçš„ï¼Œä¸”å¯ä»¥åœ¨æœ¬åœ°æœºå™¨ä¸Šç›´æ¥è¿è¡Œã€‚æ‚¨è¿˜å¯ä»¥æŸ¥çœ‹æ›´å¤šçš„æ‰˜ç®¡é€‰é¡¹ã€‚</p>
<p>ä¸‹é¢ä»¥ FAISS ä¸ºä¾‹ä»‹ç»ï¼Œå®ƒåˆ©ç”¨äº†Facebook AI Similarity Searchï¼ˆFAISSï¼‰åº“ã€‚</p>
<pre data-role="codeBlock" data-info="" class="language-text"><code># pip install faiss-cpu

import os
import getpass

os.environ['OPENAI_API_KEY'] = getpass.getpass('OpenAI API Key:')


from langchain_community.document_loaders import TextLoader
from langchain_openai import OpenAIEmbeddings
from langchain_text_splitters import CharacterTextSplitter
from langchain_community.vectorstores import FAISS

# Load the document, split it into chunks, embed each chunk and load it into the vector store.
raw_documents = TextLoader('../../../state_of_the_union.txt').load()
text_splitter = CharacterTextSplitter(chunk_size=1000, chunk_overlap=0)
documents = text_splitter.split_documents(raw_documents)
db = FAISS.from_documents(documents, OpenAIEmbeddings())
</code></pre><h3 id="ç›¸ä¼¼åº¦æ£€ç´¢">ç›¸ä¼¼åº¦æ£€ç´¢ </h3>
<pre data-role="codeBlock" data-info="" class="language-text"><code>query = "What did the president say about Ketanji Brown Jackson"
docs = db.similarity_search(query)
print(docs[0].page_content)
</code></pre><h3 id="åŸºäºvectorçš„ç›¸ä¼¼åº¦æ£€ç´¢">åŸºäºVectorçš„ç›¸ä¼¼åº¦æ£€ç´¢ </h3>
<p>æ‚¨è¿˜å¯ä»¥é€šè¿‡ <code>similarity_search_by_vector</code> ä½¿ç”¨å‘é‡è€Œéæ–‡æœ¬å­—ç¬¦ä¸²æ¥è¿›è¡Œæ–‡æ¡£æœç´¢ã€‚</p>
<pre data-role="codeBlock" data-info="" class="language-text"><code>embedding_vector = OpenAIEmbeddings().embed_query(query)
docs = db.similarity_search_by_vector(embedding_vector)
print(docs[0].page_content)
</code></pre><h2 id="å¼‚æ­¥æ“ä½œè¯´æ˜">å¼‚æ­¥æ“ä½œè¯´æ˜ </h2>
<p>å‘é‡å­˜å‚¨é€šå¸¸ç‹¬ç«‹è¿è¡Œä¸ºä¸€ä¸ªæœåŠ¡ï¼Œå¹¶æ¶‰åŠè¾“å…¥/è¾“å‡ºæ“ä½œï¼Œå› æ­¤é€šå¸¸éœ€è¦å¼‚æ­¥å¤„ç†ã€‚è¿™ç§æ–¹å¼ä¸ä»…å¯ä»¥èŠ‚çœç­‰å¾…å¤–éƒ¨æœåŠ¡å“åº”çš„æ—¶é—´ï¼Œå¯¹äºä½¿ç”¨å¼‚æ­¥æ¡†æ¶ï¼ˆä¾‹å¦‚ <a href="https://fastapi.tiangolo.com/">FastAPI</a>ï¼‰çš„å¼€å‘ç¯å¢ƒå°¤ä¸ºé‡è¦ã€‚</p>
<p>LangChainæ”¯æŒå¯¹å‘é‡å­˜å‚¨çš„å¼‚æ­¥æ“ä½œã€‚æ‰€æœ‰æ–¹æ³•éƒ½å¯ä»¥ä½¿ç”¨å®ƒä»¬çš„å¼‚æ­¥å¯¹åº”æ–¹æ³•è°ƒç”¨ï¼Œæ–¹æ³•åå‰ç¼€ä¸º<code>a</code>ï¼Œè¡¨ç¤ºå¼‚æ­¥ã€‚</p>
<p><code>Qdrant</code> æ”¯æŒå®Œæ•´çš„å¼‚æ­¥æ“ä½œï¼Œæ˜¯æœ¬æ•™ç¨‹ä¸­ä½¿ç”¨çš„å‘é‡å­˜å‚¨ã€‚</p>
<pre data-role="codeBlock" data-info="" class="language-text"><code>#pip install qdrant-client
from langchain_community.vectorstores import Qdrant
db = await Qdrant.afrom_documents(documents, embeddings, "http://localhost:6333")

# å¼‚æ­¥æ£€ç´¢
query = "What did the president say about Ketanji Brown Jackson"
docs = await db.asimilarity_search(query)
print(docs[0].page_content)

# åŸºäºVectorçš„å¼‚æ­¥æ£€ç´¢
embedding_vector = embeddings.embed_query(query)
docs = await db.asimilarity_search_by_vector(embedding_vector)
</code></pre><h2 id="æœ€å¤§è¾¹é™…ç›¸å…³æ€§æœç´¢-mmr">æœ€å¤§è¾¹é™…ç›¸å…³æ€§æœç´¢ (MMR) </h2>
<p>æœ€å¤§è¾¹é™…ç›¸å…³æ€§æœç´¢ï¼ˆMaximum marginal relevance search (MMR)ï¼‰ä¼˜åŒ–äº†ä¸æŸ¥è¯¢çš„åŒ¹é…åº¦åŠæ–‡æ¡£é€‰æ‹©çš„å¤šæ ·æ€§ï¼Œä¹Ÿå¯é€šè¿‡å¼‚æ­¥ API å®ç°ã€‚</p>
<pre data-role="codeBlock" data-info="" class="language-text"><code>query = "What did the president say about Ketanji Brown Jackson"
found_docs = await qdrant.amax_marginal_relevance_search(query, k=2, fetch_k=10)
for i, doc in enumerate(found_docs):
    print(f"{i + 1}.", doc.page_content, "\n")
</code></pre><h1 id="æ£€ç´¢å™¨--ï¸-langchain">æ£€ç´¢å™¨ | ğŸ¦œï¸ğŸ”— LangChain </h1>
<p>åŸæ–‡å…¨æ–‡ï¼š<a href="https://python.langchain.com/docs/modules/data_connection/retrievers/">https://python.langchain.com/docs/modules/data_connection/retrievers/</a></p>
<p>æ£€ç´¢å™¨æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒæ ¹æ®éç»“æ„åŒ–çš„æŸ¥è¯¢è¿”å›æ–‡æ¡£ã€‚å®ƒçš„ç”¨é€”æ¯”å‘é‡å­˜å‚¨æ›´å¹¿æ³›ï¼Œä¸éœ€è¦å­˜å‚¨æ–‡æ¡£ï¼Œåªéœ€æä¾›æ–‡æ¡£çš„è¿”å›ï¼ˆæˆ–æ£€ç´¢ï¼‰ã€‚å‘é‡å­˜å‚¨å¯ä½œä¸ºæ£€ç´¢å™¨çš„åŸºç¡€ï¼ŒåŒæ—¶è¿˜æœ‰å…¶ä»–ç±»å‹çš„æ£€ç´¢å™¨å­˜åœ¨ã€‚</p>
<p>æ£€ç´¢å™¨æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²æŸ¥è¯¢ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«å¤šä¸ª<code>Document</code>çš„åˆ—è¡¨ã€‚</p>
<h2 id="é«˜çº§æ£€ç´¢ç±»å‹">é«˜çº§æ£€ç´¢ç±»å‹ </h2>
<p>LangChain æä¾›å¤šç§å…ˆè¿›çš„æ£€ç´¢ç±»å‹ã€‚ä»¥ä¸‹æ˜¯è¿™äº›ç±»å‹çš„å®Œæ•´åˆ—è¡¨åŠå…¶è¯¦ç»†ä¿¡æ¯ï¼š</p>
<p><strong>åç§°</strong>ï¼šæ£€ç´¢ç®—æ³•çš„åç§°ã€‚</p>
<p><strong>ç´¢å¼•ç±»å‹</strong>ï¼šæ­¤ç®—æ³•ä¾èµ–çš„ç´¢å¼•ç±»å‹ï¼ˆå¦‚æœæœ‰ï¼‰ã€‚</p>
<p><strong>ä½¿ç”¨ LLM</strong>ï¼šè¯¥æ£€ç´¢æ–¹æ³•æ˜¯å¦åˆ©ç”¨å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ã€‚</p>
<p><strong>ä½•æ—¶ä½¿ç”¨</strong>ï¼šå…³äºä½•æ—¶è€ƒè™‘ä½¿ç”¨è¿™ç§æ£€ç´¢æ–¹æ³•çš„å»ºè®®ã€‚</p>
<p><strong>æè¿°</strong>ï¼šæè¿°è¯¥æ£€ç´¢ç®—æ³•çš„åŠŸèƒ½ã€‚</p>
<table>
<thead>
<tr>
<th>åç§°</th>
<th>ç´¢å¼•ç±»å‹</th>
<th>ä½¿ç”¨ LLM</th>
<th>ä½•æ—¶ä½¿ç”¨</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>Vectorstore</td>
<td>Vectorstore</td>
<td>å¦</td>
<td>åˆšå¼€å§‹æ—¶ï¼Œå¯»æ‰¾ç®€å•å¿«æ·çš„æ–¹æ³•æ—¶ã€‚</td>
<td>è¿™æ˜¯æœ€åŸºæœ¬çš„æ–¹æ³•ï¼Œä¹Ÿæ˜¯æœ€å®¹æ˜“ä¸Šæ‰‹çš„ã€‚ä¸»è¦æ˜¯ä¸ºæ¯ä¸ªæ–‡æœ¬ç‰‡æ®µåˆ›å»ºåµŒå…¥ã€‚</td>
</tr>
<tr>
<td>ParentDocument</td>
<td>Vectorstore + æ–‡æ¡£å­˜å‚¨</td>
<td>å¦</td>
<td>å½“ä½ çš„é¡µé¢åŒ…å«è®¸å¤šéœ€è¦å•ç‹¬ç´¢å¼•ä½†æœ€å¥½ä¸€èµ·æ£€ç´¢çš„å°å—ä¿¡æ¯æ—¶ã€‚</td>
<td>è¿™ç§æ–¹æ³•ä¸ºæ¯ä¸ªæ–‡æ¡£ç´¢å¼•å¤šä¸ªç‰‡æ®µã€‚ç„¶åå¯»æ‰¾åµŒå…¥ç©ºé—´ä¸­æœ€ç›¸ä¼¼çš„ç‰‡æ®µï¼Œä½†è¿”å›çš„æ˜¯å®Œæ•´çš„çˆ¶æ–‡æ¡£è€Œä¸æ˜¯å•ä¸ªç‰‡æ®µã€‚</td>
</tr>
<tr>
<td>Multi Vector</td>
<td>Vectorstore + æ–‡æ¡£å­˜å‚¨</td>
<td>æœ‰æ—¶åœ¨å»ºç«‹ç´¢å¼•æ—¶</td>
<td>å½“ä½ å¯ä»¥ä»æ–‡æ¡£ä¸­æå–å‡ºæ¯”æ–‡æœ¬æœ¬èº«æ›´é‡è¦çš„ä¿¡æ¯è¿›è¡Œç´¢å¼•æ—¶ã€‚</td>
<td>è¿™åŒ…æ‹¬ä¸ºæ¯ä¸ªæ–‡æ¡£åˆ›å»ºå¤šä¸ªå‘é‡ï¼Œæ¯ä¸ªå‘é‡çš„ç”Ÿæˆæ–¹å¼å¤šç§å¤šæ ·ï¼Œå¦‚æ–‡æœ¬çš„æ‘˜è¦æˆ–å‡è®¾æ€§é—®é¢˜ã€‚</td>
</tr>
<tr>
<td>Self Query</td>
<td>Vectorstore</td>
<td>æ˜¯</td>
<td>å½“ç”¨æˆ·çš„é—®é¢˜æ›´é€‚åˆé€šè¿‡æœç´¢æ–‡æ¡£çš„å…ƒæ•°æ®è€Œéæ–‡æœ¬çš„ç›¸ä¼¼æ€§æ¥è§£ç­”æ—¶ã€‚</td>
<td>è¿™ç§æ–¹æ³•ä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹å°†ç”¨æˆ·çš„è¾“å…¥è½¬åŒ–ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šä¸€æ˜¯è¯­ä¹‰æŸ¥è¯¢å­—ç¬¦ä¸²ï¼ŒäºŒæ˜¯ç›¸å…³çš„å…ƒæ•°æ®è¿‡æ»¤å™¨ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œé—®é¢˜é€šå¸¸ä¸æ–‡æ¡£çš„å…ƒæ•°æ®è€Œéå…¶å†…å®¹æœ‰å…³ã€‚</td>
</tr>
<tr>
<td>Contextual Compression</td>
<td>ä»»ä½•</td>
<td>æœ‰æ—¶</td>
<td>å½“ä½ å‘ç°æ£€ç´¢çš„æ–‡æ¡£å«æœ‰è¿‡å¤šæ— å…³ä¿¡æ¯ï¼Œåˆ†æ•£äº†å¤§è¯­è¨€æ¨¡å‹çš„æ³¨æ„åŠ›æ—¶ã€‚</td>
<td>è¿™ç§æ–¹æ³•åœ¨å¦ä¸€æ£€ç´¢å™¨åŸºç¡€ä¸Šæ·»åŠ äº†ä¸€ä¸ªåå¤„ç†æ­¥éª¤ï¼Œä»…æå–æ£€ç´¢åˆ°çš„æ–‡æ¡£ä¸­æœ€å…³é”®çš„ä¿¡æ¯ã€‚å¯ä»¥é€šè¿‡åµŒå…¥æˆ–ä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹æ¥å®ç°ã€‚</td>
</tr>
<tr>
<td>Time-Weighted Vectorstore</td>
<td>Vectorstore</td>
<td>å¦</td>
<td>å½“ä½ å¸Œæœ›ä¾æ®æ–‡æ¡£çš„æ—¶é—´æˆ³æ£€ç´¢æœ€æ–°æ–‡æ¡£æ—¶ã€‚</td>
<td>è¿™ç§æ–¹æ³•ç»“åˆäº†è¯­ä¹‰ç›¸ä¼¼æ€§æ£€ç´¢å’Œæ—¶é—´è¿‘æ€§æ£€ç´¢ï¼Œä»¥æ—¶é—´æˆ³ä¸ºåŸºå‡†ç´¢å¼•æ–‡æ¡£ã€‚</td>
</tr>
<tr>
<td>Multi-Query Retriever</td>
<td>ä»»ä½•</td>
<td>æ˜¯</td>
<td>å½“ç”¨æˆ·çš„é—®é¢˜å¤æ‚ï¼Œéœ€è¦å¤šä¸ªä¸åŒä¿¡æ¯ç‰‡æ®µæ‰èƒ½å›ç­”æ—¶ã€‚</td>
<td>è¿™ç§æ–¹æ³•åˆ©ç”¨å¤§è¯­è¨€æ¨¡å‹ä»ä¸€ä¸ªé—®é¢˜ç”Ÿæˆå¤šä¸ªæŸ¥è¯¢ï¼Œè¿™åœ¨åŸå§‹æŸ¥è¯¢éœ€è¦å…³äºå¤šä¸ªä¸»é¢˜çš„ä¿¡æ¯æ‰èƒ½å¾—åˆ°æ°å½“å›ç­”æ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚é€šè¿‡ç”Ÿæˆå¤šä¸ªæŸ¥è¯¢ï¼Œå¯ä»¥ä¸ºæ¯ä¸€ä¸ªæŸ¥è¯¢è·å–ç›¸åº”çš„æ–‡æ¡£ã€‚</td>
</tr>
<tr>
<td>Ensemble</td>
<td>ä»»ä½•</td>
<td>å¦</td>
<td>å¦‚æœä½ æœ‰å¤šç§æ£€ç´¢æ–¹æ³•ï¼Œå¸Œæœ›è¯•å›¾å°†å®ƒä»¬ç»“åˆä½¿ç”¨æ—¶ã€‚</td>
<td>è¿™ç§æ–¹æ³•ä»å¤šä¸ªæ£€ç´¢å™¨ä¸­è·å–æ–‡æ¡£ï¼Œå¹¶å°†ç»“æœåˆå¹¶ã€‚</td>
</tr>
<tr>
<td>Long-Context Reorder</td>
<td>ä»»ä½•</td>
<td>å¦</td>
<td>å¦‚æœä½ åœ¨ä½¿ç”¨é•¿ä¸Šä¸‹æ–‡æ¨¡å‹å¹¶å‘ç°æ¨¡å‹å¿½è§†äº†æ£€ç´¢æ–‡æ¡£ä¸­é—´çš„ä¿¡æ¯æ—¶ã€‚</td>
<td>è¿™ç§æ–¹æ³•ä»ä¸€ä¸ªåŸºç¡€æ£€ç´¢å™¨ä¸­è·å–æ–‡æ¡£ï¼Œç„¶åé‡æ–°æ’åºï¼Œä½¿å¾—æœ€ç›¸å…³çš„æ–‡æ¡£é è¿‘èµ·å§‹å’Œç»“å°¾éƒ¨åˆ†ã€‚è¿™å¯¹äºé•¿ä¸Šä¸‹æ–‡æ¨¡å‹æ¥è¯´å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºè¿™äº›æ¨¡å‹æœ‰æ—¶ä¼šå¿½è§†ä¸Šä¸‹æ–‡çª—å£ä¸­é—´çš„ä¿¡æ¯ã€‚</td>
</tr>
</tbody>
</table>
<h2 id="ç¬¬ä¸‰æ–¹é›†æˆ">ç¬¬ä¸‰æ–¹é›†æˆ </h2>
<p>LangChain ä¹Ÿæ•´åˆäº†è®¸å¤šç¬¬ä¸‰æ–¹æ£€ç´¢æœåŠ¡ã€‚æ¬²äº†è§£æ‰€æœ‰é›†æˆï¼Œè¯·æŸ¥çœ‹<a href="https://python.langchain.com/docs/integrations/retrievers/">è¿™ä¸ªåˆ—è¡¨</a>ã€‚</p>
<h2 id="åœ¨-lcel-ä¸­ä½¿ç”¨æ£€ç´¢å™¨">åœ¨ LCEL ä¸­ä½¿ç”¨æ£€ç´¢å™¨ </h2>
<p>æ£€ç´¢å™¨ä½œä¸º<code>Runnable</code>ï¼Œå¯ä»¥è½»æ¾åœ°ä¸å…¶ä»–<code>Runnable</code>å¯¹è±¡ç»„åˆä½¿ç”¨ï¼š</p>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token keyword keyword-from">from</span> langchain_openai <span class="token keyword keyword-import">import</span> ChatOpenAI
<span class="token keyword keyword-from">from</span> langchain_core<span class="token punctuation">.</span>prompts <span class="token punctuation">:</span> ChatPromptTemplate
<span class="token keyword keyword-from">from</span> langchain_core<span class="token punctuation">.</span>output_parsers <span class="token punctuation">:</span> StrOutputParser
<span class="token keyword keyword-from">from</span> langchain_core<span class="token punctuation">.</span>runnables <span class="token punctuation">:</span> RunnablePassthrough

template <span class="token operator">=</span> <span class="token triple-quoted-string string">"""æ ¹æ®ä»¥ä¸‹ä¸Šä¸‹æ–‡å›ç­”é—®é¢˜ï¼š
{context}
é—®é¢˜ï¼š{question}"""</span>

prompt <span class="token operator">=</span> ChatPromptTemplate<span class="token punctuation">.</span>from_template<span class="token punctuation">(</span>template<span class="token punctuation">)</span>
model <span class="token operator">=</span> ChatOpenAI<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword keyword-def">def</span> <span class="token function">format_docs</span><span class="token punctuation">(</span>docs<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-return">return</span> <span class="token string">"\n\n"</span><span class="token punctuation">.</span>

join<span class="token punctuation">(</span><span class="token punctuation">[</span>d<span class="token punctuation">.</span>page_content <span class="token keyword keyword-for">for</span> d <span class="token keyword keyword-in">in</span> docs<span class="token punctuation">]</span><span class="token punctuation">)</span>

chain <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token punctuation">{</span><span class="token string">"context"</span><span class="token punctuation">:</span> retriever <span class="token operator">|</span> format_docs<span class="token punctuation">,</span> <span class="token string">"question"</span><span class="token punctuation">:</span> RunnablePassthrough<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">|</span> prompt
    <span class="token operator">|</span> model
    <span class="token operator">|</span> StrOutputParser<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

chain<span class="token punctuation">.</span>invoke<span class="token punctuation">(</span><span class="token string">"What did the president say about technology?"</span><span class="token punctuation">)</span>
</code></pre><h2 id="è‡ªå®šä¹‰æ£€ç´¢å™¨">è‡ªå®šä¹‰æ£€ç´¢å™¨ </h2>
<p>ç”±äºæ£€ç´¢å™¨æ¥å£æå…¶ç®€å•ï¼Œè‡ªè¡Œç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰æ£€ç´¢å™¨ä¹Ÿéå¸¸å®¹æ˜“ã€‚</p>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token keyword keyword-from">from</span> langchain_core<span class="token punctuation">.</span>retrievers <span class="token punctuation">:</span> BaseRetriever
<span class="token keyword keyword-from">from</span> langchain_core<span class="token punctuation">.</span>callbacks <span class="token punctuation">:</span> CallbackManagerForRetrieverRun
<span class="token keyword keyword-from">from</span> langchain_core<span class="token punctuation">.</span>documents <span class="token punctuation">:</span> Document
<span class="token keyword keyword-from">from</span> typing <span class="token punctuation">:</span> List

<span class="token keyword keyword-class">class</span> <span class="token class-name">CustomRetriever</span><span class="token punctuation">(</span>BaseRetriever<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-def">def</span> <span class="token function">_get_relevant_documents</span><span class="token punctuation">(</span>
        self<span class="token punctuation">,</span> query<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">,</span> run_manager<span class="token punctuation">:</span> CallbackManagerForRetrieverRun
    <span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> List<span class="token punctuation">[</span>Document<span class="token punctuation">]</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> <span class="token punctuation">[</span>Document<span class="token punctuation">(</span>page_content<span class="token operator">=</span>query<span class="token punctuation">)</span><span class="token punctuation">]</span>

retriever <span class="token operator">=</span> CustomRetriever<span class="token punctuation">(</span><span class="token punctuation">)</span>
retriever<span class="token punctuation">.</span>get_relevant_documents<span class="token punctuation">(</span><span class="token string">"bar"</span><span class="token punctuation">)</span>
</code></pre><h2 id="å­¦ä¹ ç¬”è®°é—®é¢˜-3">å­¦ä¹ ç¬”è®°ï¼ˆé—®é¢˜ï¼‰ </h2>
<p>Q1ï¼šä»€ä¹ˆæ˜¯LCELï¼Ÿ<br>
LCELæ˜¯æŒ‡ LangChain Expression Language</p>
<h1 id="ç´¢å¼•--ï¸-langchain">ç´¢å¼• | ğŸ¦œï¸ğŸ”— LangChain </h1>
<p>åŸæ–‡å…¨æ–‡ï¼š<a href="https://python.langchain.com/docs/modules/data_connection/indexing/">https://python.langchain.com/docs/modules/data_connection/indexing/</a></p>
<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†æ¢è®¨å¦‚ä½•ä½¿ç”¨LangChainç´¢å¼•APIæ‰§è¡Œä¸€ä¸ªåŸºç¡€çš„ç´¢å¼•å·¥ä½œæµç¨‹ã€‚</p>
<p>ç´¢å¼•APIå¯ä»¥å¸®åŠ©æ‚¨ä»ä»»ä½•æ•°æ®æ¥æºåŠ è½½æ–‡æ¡£ï¼Œå¹¶å°†å…¶ä¸å‘é‡å­˜å‚¨åŒæ­¥ã€‚è¿™ä¸€è¿‡ç¨‹ç‰¹åˆ«æœ‰åŠ©äºï¼š</p>
<ul>
<li>é˜²æ­¢å‘é‡å­˜å‚¨ä¸­å‡ºç°é‡å¤çš„å†…å®¹</li>
<li>é¿å…é‡æ–°å†™å…¥æœªæ”¹å˜çš„å†…å®¹</li>
<li>å‡å°‘å¯¹æœªæ›´æ”¹å†…å®¹çš„åµŒå…¥è®¡ç®—</li>
</ul>
<p>è¿™ä¸ä»…å¯ä»¥èŠ‚çœæ‚¨çš„æ—¶é—´å’Œèµ„é‡‘ï¼Œè¿˜èƒ½æé«˜å‘é‡æœç´¢çš„æ•ˆæœã€‚</p>
<p>å…³é”®æ˜¯ï¼Œå³ä½¿æ–‡æ¡£ç»è¿‡äº†å¤šä¸ªè½¬æ¢æ­¥éª¤ï¼ˆæ¯”å¦‚æ–‡æœ¬åˆ‡åˆ†ï¼‰ï¼Œç´¢å¼•APIä»ç„¶èƒ½æœ‰æ•ˆè¿è¡Œã€‚</p>
<h2 id="å·¥ä½œåŸç†">å·¥ä½œåŸç† </h2>
<p>LangChainçš„ç´¢å¼•åŠŸèƒ½é€šè¿‡ä¸€ä¸ªè®°å½•ç®¡ç†å™¨ï¼ˆ<code>RecordManager</code>ï¼‰æ¥è¿½è¸ªæ–‡æ¡£åœ¨å‘é‡å­˜å‚¨ä¸­çš„å†™å…¥åŠ¨ä½œã€‚</p>
<p>åœ¨è¿›è¡Œç´¢å¼•æ—¶ï¼Œç³»ç»Ÿä¼šä¸ºæ¯ä»½æ–‡æ¡£è®¡ç®—å“ˆå¸Œå€¼ï¼Œå¹¶åœ¨è®°å½•ç®¡ç†å™¨ä¸­è®°å½•ä»¥ä¸‹ä¿¡æ¯ï¼š</p>
<ul>
<li>æ–‡æ¡£çš„å“ˆå¸Œå€¼ï¼ˆåŒ…æ‹¬é¡µé¢å†…å®¹å’Œå…ƒæ•°æ®ï¼‰</li>
<li>æ–‡æ¡£çš„å†™å…¥æ—¶é—´</li>
<li>æ¥æºIDâ€”â€”æ¯ä»½æ–‡æ¡£çš„å…ƒæ•°æ®ä¸­åº”åŒ…å«æ­¤ä¿¡æ¯ï¼Œä»¥ä¾¿è¿½è¸ªæ–‡æ¡£çš„æ¥æº</li>
</ul>
<h2 id="åˆ é™¤æ¨¡å¼">åˆ é™¤æ¨¡å¼ </h2>
<p>å‘å‘é‡å­˜å‚¨ç´¢å¼•æ–‡æ¡£æ—¶ï¼Œå¯èƒ½éœ€è¦åˆ é™¤å­˜å‚¨ä¸­å·²å­˜åœ¨çš„æŸäº›æ–‡æ¡£ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½éœ€è¦ç§»é™¤æ‰€æœ‰æ¥è‡ªåŒä¸€æ¥æºçš„ç°æœ‰æ–‡æ¡£ï¼›åœ¨å…¶ä»–æƒ…å†µä¸‹ï¼Œåˆ™å¯èƒ½éœ€è¦å…¨é¢åˆ é™¤æ‰€æœ‰æ–‡æ¡£ã€‚ç´¢å¼•APIçš„åˆ é™¤æ¨¡å¼å…è®¸æ‚¨é€‰æ‹©åˆé€‚çš„å¤„ç†æ–¹å¼ï¼š</p>
<table>
<thead>
<tr>
<th>æ¸…ç†æ¨¡å¼</th>
<th>å†…å®¹å»é‡</th>
<th>æ”¯æŒå¹¶è¡Œæ“ä½œ</th>
<th>æ¸…é™¤å·²åˆ é™¤çš„æ¥æºæ–‡æ¡£</th>
<th>æ¸…é™¤æ¥æºæˆ–æ´¾ç”Ÿæ–‡æ¡£çš„å˜æ›´</th>
<th>æ¸…ç†æ—¶é—´ç‚¹</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ— ï¼ˆNoneï¼‰</td>
<td>âœ…</td>
<td>âœ…</td>
<td>âŒ</td>
<td>âŒ</td>
<td>-</td>
</tr>
<tr>
<td>å¢é‡ï¼ˆIncrementalï¼‰</td>
<td>âœ…</td>
<td>âœ…</td>
<td>âŒ</td>
<td>âœ…</td>
<td>æŒç»­è¿›è¡Œ</td>
</tr>
<tr>
<td>å…¨é‡ï¼ˆFullï¼‰</td>
<td>âœ…</td>
<td>âŒ</td>
<td>âœ…</td>
<td>âœ…</td>
<td>ç´¢å¼•ç»“æŸæ—¶</td>
</tr>
</tbody>
</table>
<p>â€œæ— â€æ¨¡å¼ä¸ä¼šè‡ªåŠ¨è¿›è¡Œä»»ä½•æ¸…ç†ï¼Œç”¨æˆ·éœ€è¦æ‰‹åŠ¨æ¸…é™¤æ—§å†…å®¹ã€‚â€œå¢é‡â€å’Œâ€œå…¨é‡â€æ¨¡å¼åˆ™æä¾›è‡ªåŠ¨æ¸…ç†åŠŸèƒ½ï¼š</p>
<ul>
<li>å¦‚æœæ¥æºæ–‡æ¡£æˆ–å…¶æ´¾ç”Ÿæ–‡æ¡£çš„å†…å®¹å‘ç”Ÿå˜åŒ–ï¼Œâ€œå¢é‡â€å’Œâ€œå…¨é‡â€æ¨¡å¼éƒ½ä¼šæ¸…é™¤æ—§ç‰ˆæœ¬ã€‚</li>
<li>å¦‚æœæ¥æºæ–‡æ¡£å·²è¢«åˆ é™¤ï¼ˆå³å½“å‰ç´¢å¼•æ“ä½œæœªåŒ…æ‹¬æ­¤æ–‡æ¡£ï¼‰ï¼Œåˆ™â€œå…¨é‡â€æ¨¡å¼ä¼šå°†å…¶ä»å‘é‡å­˜å‚¨ä¸­å½»åº•æ¸…é™¤ï¼Œä½†â€œå¢é‡â€æ¨¡å¼åˆ™ä¸ä¼šã€‚</li>
</ul>
<p>åœ¨å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶ï¼ˆä¾‹å¦‚ï¼ŒæºPDFæ–‡ä»¶è¢«ä¿®è®¢ï¼‰ï¼Œæ–°æ—§ç‰ˆæœ¬å¯èƒ½ä¼šåœ¨ç´¢å¼•è¿‡ç¨‹ä¸­åŒæ—¶å‡ºç°ã€‚è¿™ç§æƒ…å†µé€šå¸¸å‘ç”Ÿåœ¨æ–°å†…å®¹å†™å…¥åã€æ—§ç‰ˆæœ¬åˆ é™¤</p>
<p>å‰ã€‚</p>
<ul>
<li>â€œå¢é‡â€ç´¢å¼•å¯ä»¥ç¼©çŸ­è¿™ä¸€æ—¶é—´çª—å£ï¼Œå› ä¸ºå®ƒå¯ä»¥åœ¨å†™å…¥è¿‡ç¨‹ä¸­æŒç»­è¿›è¡Œæ¸…ç†ã€‚</li>
<li>â€œå…¨é‡â€æ¨¡å¼åˆ™åœ¨æ‰€æœ‰æ•°æ®æ‰¹æ¬¡å®Œæˆåè¿›è¡Œæ¸…ç†ã€‚</li>
</ul>
<h2 id="ä½¿ç”¨è¦æ±‚">ä½¿ç”¨è¦æ±‚ </h2>
<ol>
<li>ä¸è¦å°†ç´¢å¼•APIä¸å·²ç‹¬ç«‹å¡«å……å†…å®¹çš„å‘é‡å­˜å‚¨ä¸€èµ·ä½¿ç”¨ï¼Œå› ä¸ºè®°å½•ç®¡ç†å™¨æ— æ³•è¯†åˆ«è¿™äº›é¢„å…ˆæ’å…¥çš„è®°å½•ã€‚</li>
<li>æ­¤APIä»…é€‚ç”¨äºæ”¯æŒä»¥ä¸‹æ“ä½œçš„LangChainå‘é‡å­˜å‚¨ï¼š
<ul>
<li>é€šè¿‡IDæ·»åŠ æ–‡æ¡£ï¼ˆä½¿ç”¨<code>add_documents</code>æ–¹æ³•ï¼Œéœ€è¦<code>ids</code>å‚æ•°ï¼‰</li>
<li>é€šè¿‡IDåˆ é™¤æ–‡æ¡£ï¼ˆä½¿ç”¨<code>delete</code>æ–¹æ³•ï¼Œéœ€è¦<code>ids</code>å‚æ•°ï¼‰</li>
</ul>
</li>
</ol>
<p>æ”¯æŒçš„å‘é‡å­˜å‚¨ç³»ç»ŸåŒ…æ‹¬ï¼š<code>AnalyticDB</code>, <code>AstraDB</code>, <code>AwaDB</code>, <code>Bagel</code>, <code>Cassandra</code>, <code>Chroma</code>, <code>CouchbaseVectorStore</code>, <code>DashVector</code>, <code>DatabricksVectorSearch</code>, <code>DeepLake</code>, <code>Dingo</code>, <code>ElasticVectorSearch</code>, <code>ElasticsearchStore</code>, <code>FAISS</code>, <code>HanaDB</code>, <code>Milvus</code>, <code>MyScale</code>, <code>OpenSearchVectorSearch</code>, <code>PGVector</code>, <code>Pinecone</code>, <code>Qdrant</code>, <code>Redis</code>, <code>Rockset</code>, <code>ScaNN</code>, <code>SupabaseVectorStore</code>, <code>SurrealDBStore</code>, <code>TimescaleVector</code>, <code>Vald</code>, <code>VDMS</code>, <code>Vearch</code>, <code>VespaStore</code>, <code>Weaviate</code>, <code>ZepVectorStore</code>, <code>OpenSearchVectorSearch</code>.</p>
<h2 id="æ³¨æ„äº‹é¡¹">æ³¨æ„äº‹é¡¹ </h2>
<p>è®°å½•ç®¡ç†å™¨ä½¿ç”¨åŸºäºæ—¶é—´çš„æœºåˆ¶æ¥åˆ¤æ–­å“ªäº›å†…å®¹éœ€è¦è¢«æ¸…ç†ï¼ˆä½¿ç”¨â€œå…¨é‡â€æˆ–â€œå¢é‡â€æ¸…ç†æ¨¡å¼æ—¶ï¼‰ã€‚</p>
<p>å¦‚æœä¸¤ä¸ªä»»åŠ¡è¿ç»­æ‰§è¡Œï¼Œä¸”ç¬¬ä¸€ä¸ªä»»åŠ¡åœ¨æ—¶é’Ÿæ—¶é—´å˜æ›´å‰å®Œæˆï¼Œåˆ™ç¬¬äºŒä¸ªä»»åŠ¡å¯èƒ½æ— æ³•æ‰§è¡Œæ¸…ç†æ“ä½œã€‚</p>
<p>è¿™åœ¨å®é™…åº”ç”¨ä¸­é€šå¸¸ä¸ä¼šæˆé—®é¢˜ï¼Œå› ä¸ºï¼š</p>
<ol>
<li>è®°å½•ç®¡ç†å™¨é‡‡ç”¨æ›´é«˜ç²¾åº¦çš„æ—¶é—´æˆ³ã€‚</li>
<li>æ•°æ®å˜æ›´éœ€è¦åœ¨ä¸¤ä¸ªä»»åŠ¡ä¹‹é—´å‘ç”Ÿï¼Œå¦‚æœä¸¤ä¸ªä»»åŠ¡é—´éš”å¾ˆçŸ­ï¼Œåˆ™è¿™ç§æƒ…å†µä¸å¤ªå¯èƒ½å‘ç”Ÿã€‚</li>
<li>ç´¢å¼•ä»»åŠ¡é€šå¸¸éœ€è¦çš„æ—¶é—´è¿œä¸æ­¢å‡ æ¯«ç§’ã€‚</li>
</ol>
<h2 id="å¿«é€Ÿå¼€å§‹-1">å¿«é€Ÿå¼€å§‹ </h2>
<p>åˆå§‹åŒ–å‘é‡å­˜å‚¨å’Œè®¾ç½®åµŒå…¥çš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token keyword keyword-from">from</span> langchain<span class="token punctuation">.</span>indexes <span class="token keyword keyword-import">import</span> SQLRecordManager<span class="token punctuation">,</span> index
<span class="token keyword keyword-from">from</span> langchain_core<span class="token punctuation">.</span>documents <span class="token keyword keyword-import">import</span> Document
<span class="token keyword keyword-from">from</span> langchain_elasticsearch <span class="token keyword keyword-import">import</span> ElasticsearchStore
<span class="token keyword keyword-from">from</span> langchain_openai <span class="token keyword keyword-import">import</span> OpenAIEmbeddings

collection_name <span class="token operator">=</span> <span class="token string">"test_index"</span>
embedding <span class="token operator">=</span> OpenAIEmbeddings<span class="token punctuation">(</span><span class="token punctuation">)</span>
vectorstore <span class="token operator">=</span> ElasticsearchStore<span class="token punctuation">(</span>
    es_url<span class="token operator">=</span><span class="token string">"http://localhost:9200"</span><span class="token punctuation">,</span> index_name<span class="token operator">=</span><span class="token string">"test_index"</span><span class="token punctuation">,</span> embedding<span class="token operator">=</span>embedding
<span class="token punctuation">)</span>

namespace <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"elasticsearch/</span><span class="token interpolation"><span class="token punctuation">{</span>collection_name<span class="token punctuation">}</span></span><span class="token string">"</span></span>
record_manager <span class="token operator">=</span> SQLRecordManager<span class="token punctuation">(</span>
    namespace<span class="token punctuation">,</span> db_url<span class="token operator">=</span><span class="token string">"sqlite:///record_manager_cache.sql"</span>
<span class="token punctuation">)</span>
record_manager<span class="token punctuation">.</span>create_schema<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># ç¤ºä¾‹æ–‡æ¡£</span>
doc1 <span class="token operator">=</span> Document<span class="token punctuation">(</span>page_content<span class="token operator">=</span><span class="token string">"kitty"</span><span class="token punctuation">,</span> metadata<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">"source"</span><span class="token punctuation">:</span> <span class="token string">"kitty.txt"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
doc2 <span class="token operator">=</span> Document<span class="token punctuation">(</span>page_content<span class="token operator">=</span><span class="token string">"doggy"</span><span class="token punctuation">,</span> metadata<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">"source"</span><span class="token punctuation">:</span> <span class="token string">"doggy.txt"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment"># ç´¢å¼•æ“ä½œ</span>
<span class="token keyword keyword-def">def</span> <span class="token function">_clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""ä¸ºæ¸…ç†å†…å®¹æä¾›è¾…åŠ©æ–¹æ³•ã€‚è¯·å‚é˜…`full`æ¨¡å¼éƒ¨åˆ†äº†è§£å…¶å·¥ä½œåŸç†ã€‚"""</span>
    index<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> record_manager<span class="token punctuation">,</span> vectorstore<span class="token punctuation">,</span> cleanup<span class="token operator">=</span><span class="token string">"full"</span><span class="token punctuation">,</span> source_id_key<span class="token operator">=</span><span class="token string">"source"</span><span class="token punctuation">)</span>

index<span class="token punctuation">(</span>
    <span class="token punctuation">[</span>doc1<span class="token punctuation">,</span> doc1<span class="token punctuation">,</span> doc1<span class="token punctuation">,</span> doc1<span class="token punctuation">,</span> doc1<span class="token punctuation">]</span><span class="token punctuation">,</span>
    record_manager<span class="token punctuation">,</span>
    vectorstore<span class="token punctuation">,</span>
    cleanup<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>
    source_id_key<span class="token operator">=</span><span class="token string">"source"</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code></pre><p>æ­¤ä»£ç æ®µå±•ç¤ºäº†å¦‚ä½•åˆå§‹åŒ–å‘é‡å­˜å‚¨å¹¶è¿›è¡ŒåŸºç¡€çš„ç´¢å¼•æ“ä½œï¼ŒåŒæ—¶ä»‹ç»äº†ä¸åŒçš„åˆ é™¤æ¨¡å¼åŠå…¶åº”ç”¨åœºæ™¯ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œç”¨æˆ·å¯ä»¥æ›´åŠ ç›´è§‚åœ°ç†è§£å¦‚ä½•ç®¡ç†å‘é‡å­˜å‚¨ä¸­çš„æ–‡æ¡£æ•°æ®ã€‚</p>

      </div>
      
      
    
    
    
    
    
    
  
    </body></html>